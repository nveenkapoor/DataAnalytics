<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.83.1" />


<title>A02: TIDYVERSE - Naveen -  Fundamentals of Analytics</title>
<meta property="og:title" content="A02: TIDYVERSE - Naveen -  Fundamentals of Analytics">


  <link href='/favicon.ico' rel='icon' type='image/x-icon'/>



  








<link href='//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="/css/fonts.css" media="all">
<link rel="stylesheet" href="/css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="/" class="nav-logo">
    <img src="/images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="https://github.com/nveenkapoor">GitHub</a></li>
    
    <li><a href="https://twitter.com/naviinkapoor">Twitter</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">7 min read</span>
    

    <h1 class="article-title">A02: TIDYVERSE</h1>

    
    <span class="article-date">2021-05-28</span>
    

    <div class="article-content">
      
<script src="/2021/05/28/a02-tidyverse/index_files/header-attrs/header-attrs.js"></script>


<div id="import-bct-india-data" class="section level2">
<h2>Import BCT India Data</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.1     v dplyr   1.0.6
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>btcdata &lt;- read_csv(&quot;btcinrdata.csv&quot;)</code></pre>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   Date = col_character(),
##   Open = col_character(),
##   High = col_character(),
##   Low = col_character(),
##   Close = col_character(),
##   `Adj Close` = col_character(),
##   Volume = col_character()
## )</code></pre>
<pre class="r"><code>head(btcdata)</code></pre>
<pre><code>## # A tibble: 6 x 7
##   Date      Open        High        Low        Close      `Adj Close` Volume    
##   &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     
## 1 9/18/2019 734975.875  731490.6875 725478.5   725961     725961      1.15101E+~
## 2 9/19/2019 726121      735039.75   703342.81~ 732951.18~ 732951.1875 1.42341E+~
## 3 9/20/2019 732944.3125 732415.8125 721472.43~ 724993.93~ 724993.9375 1.04916E+~
## 4 9/21/2019 725136.875  725453.6875 712110.43~ 713463.93~ 713463.9375 9.5596E+11
## 5 9/22/2019 713777.125  717307.0625 706490.93~ 717018.56~ 717018.5625 9.39824E+~
## 6 9/23/2019 716845.5625 713261      688686.5   688840.875 688840.875  1.07227E+~</code></pre>
<pre class="r"><code>names(btcdata)</code></pre>
<pre><code>## [1] &quot;Date&quot;      &quot;Open&quot;      &quot;High&quot;      &quot;Low&quot;       &quot;Close&quot;     &quot;Adj Close&quot;
## [7] &quot;Volume&quot;</code></pre>
</div>
<div id="one-table-verb---count" class="section level2">
<h2>One table verb - Count</h2>
<pre class="r"><code>btcdata %&gt;%
  count(Date)</code></pre>
<pre><code>## # A tibble: 619 x 2
##    Date          n
##    &lt;chr&gt;     &lt;int&gt;
##  1 1/1/2020      1
##  2 1/1/2021      1
##  3 1/10/2020     1
##  4 1/10/2021     1
##  5 1/11/2020     1
##  6 1/11/2021     1
##  7 1/12/2020     1
##  8 1/12/2021     1
##  9 1/13/2020     1
## 10 1/13/2021     1
## # ... with 609 more rows</code></pre>
</div>
<div id="one-table-verb---distinct" class="section level2">
<h2>One table verb - Distinct</h2>
<pre class="r"><code>btcdata %&gt;%
  distinct(Date)</code></pre>
<pre><code>## # A tibble: 619 x 1
##    Date     
##    &lt;chr&gt;    
##  1 9/18/2019
##  2 9/19/2019
##  3 9/20/2019
##  4 9/21/2019
##  5 9/22/2019
##  6 9/23/2019
##  7 9/24/2019
##  8 9/25/2019
##  9 9/26/2019
## 10 9/27/2019
## # ... with 609 more rows</code></pre>
</div>
<div id="two-table-verb---bind-rows" class="section level2">
<h2>Two table verb - Bind Rows</h2>
<pre class="r"><code>one &lt;- btcdata[1:4, ]
two &lt;- btcdata[9:12, ]

bind_rows(one, two)</code></pre>
<pre><code>## # A tibble: 8 x 7
##   Date      Open        High        Low        Close      `Adj Close` Volume    
##   &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     
## 1 9/18/2019 734975.875  731490.6875 725478.5   725961     725961      1.15101E+~
## 2 9/19/2019 726121      735039.75   703342.81~ 732951.18~ 732951.1875 1.42341E+~
## 3 9/20/2019 732944.3125 732415.8125 721472.43~ 724993.93~ 724993.9375 1.04916E+~
## 4 9/21/2019 725136.875  725453.6875 712110.43~ 713463.93~ 713463.9375 9.5596E+11
## 5 9/26/2019 602520.75   604371.375  560365.06~ 576215.68~ 576215.6875 1.36678E+~
## 6 9/27/2019 575799.3125 584457.375  562864.125 583067.125 583067.125  1.15944E+~
## 7 9/28/2019 583026.75   584211.5625 572917.06~ 581412.25  581412.25   9.9708E+11
## 8 9/29/2019 581420.875  582515      563392.56~ 571408.5   571408.5    9.19043E+~</code></pre>
</div>
<div id="two-table-verb---bind-cols" class="section level2">
<h2>Two table verb - Bind Cols</h2>
<pre class="r"><code>one &lt;- btcdata[1:4, ]
two &lt;- btcdata[9:12, ]

bind_cols(one, two)</code></pre>
<pre><code>## New names:
## * Date -&gt; Date...1
## * Open -&gt; Open...2
## * High -&gt; High...3
## * Low -&gt; Low...4
## * Close -&gt; Close...5
## * ...</code></pre>
<pre><code>## # A tibble: 4 x 14
##   Date...1  Open...2   High...3  Low...4   Close...5  `Adj Close...6` Volume...7
##   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;     
## 1 9/18/2019 734975.875 731490.6~ 725478.5  725961     725961          1.15101E+~
## 2 9/19/2019 726121     735039.75 703342.8~ 732951.18~ 732951.1875     1.42341E+~
## 3 9/20/2019 732944.31~ 732415.8~ 721472.4~ 724993.93~ 724993.9375     1.04916E+~
## 4 9/21/2019 725136.875 725453.6~ 712110.4~ 713463.93~ 713463.9375     9.5596E+11
## # ... with 7 more variables: Date...8 &lt;chr&gt;, Open...9 &lt;chr&gt;, High...10 &lt;chr&gt;,
## #   Low...11 &lt;chr&gt;, Close...12 &lt;chr&gt;, Adj Close...13 &lt;chr&gt;, Volume...14 &lt;chr&gt;</code></pre>
</div>
<div id="grouping---group-by" class="section level2">
<h2>Grouping - Group By</h2>
<pre class="r"><code>btcdata %&gt;%
  group_by(Date)</code></pre>
<pre><code>## # A tibble: 619 x 7
## # Groups:   Date [619]
##    Date      Open        High       Low        Close      `Adj Close` Volume    
##    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     
##  1 9/18/2019 734975.875  731490.68~ 725478.5   725961     725961      1.15101E+~
##  2 9/19/2019 726121      735039.75  703342.81~ 732951.18~ 732951.1875 1.42341E+~
##  3 9/20/2019 732944.3125 732415.81~ 721472.43~ 724993.93~ 724993.9375 1.04916E+~
##  4 9/21/2019 725136.875  725453.68~ 712110.43~ 713463.93~ 713463.9375 9.5596E+11
##  5 9/22/2019 713777.125  717307.06~ 706490.93~ 717018.56~ 717018.5625 9.39824E+~
##  6 9/23/2019 716845.5625 713261     688686.5   688840.875 688840.875  1.07227E+~
##  7 9/24/2019 688840.6875 695793.75  594059.875 611785.25  611785.25   1.77441E+~
##  8 9/25/2019 610569      620775.875 591001.31~ 602472.68~ 602472.6875 1.54361E+~
##  9 9/26/2019 602520.75   604371.375 560365.06~ 576215.68~ 576215.6875 1.36678E+~
## 10 9/27/2019 575799.3125 584457.375 562864.125 583067.125 583067.125  1.15944E+~
## # ... with 609 more rows</code></pre>
</div>
<div id="grouping---group-by-colls" class="section level2">
<h2>Grouping - Group By Colls</h2>
<pre class="r"><code>gdf &lt;- btcdata %&gt;% group_by(Date)
gdf %&gt;% select(group_cols())</code></pre>
<pre><code>## # A tibble: 619 x 1
## # Groups:   Date [619]
##    Date     
##    &lt;chr&gt;    
##  1 9/18/2019
##  2 9/19/2019
##  3 9/20/2019
##  4 9/21/2019
##  5 9/22/2019
##  6 9/23/2019
##  7 9/24/2019
##  8 9/25/2019
##  9 9/26/2019
## 10 9/27/2019
## # ... with 609 more rows</code></pre>
</div>
<div id="vector-functions---between" class="section level2">
<h2>Vector functions - Between</h2>
<pre class="r"><code>filter(btcdata, between(High, 2000, 1000000000))</code></pre>
<pre><code>## Warning in between(High, 2000, 1e+09): NAs introduced by coercion</code></pre>
<pre><code>## # A tibble: 615 x 7
##    Date      Open        High       Low        Close      `Adj Close` Volume    
##    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     
##  1 9/18/2019 734975.875  731490.68~ 725478.5   725961     725961      1.15101E+~
##  2 9/19/2019 726121      735039.75  703342.81~ 732951.18~ 732951.1875 1.42341E+~
##  3 9/20/2019 732944.3125 732415.81~ 721472.43~ 724993.93~ 724993.9375 1.04916E+~
##  4 9/21/2019 725136.875  725453.68~ 712110.43~ 713463.93~ 713463.9375 9.5596E+11
##  5 9/22/2019 713777.125  717307.06~ 706490.93~ 717018.56~ 717018.5625 9.39824E+~
##  6 9/23/2019 716845.5625 713261     688686.5   688840.875 688840.875  1.07227E+~
##  7 9/24/2019 688840.6875 695793.75  594059.875 611785.25  611785.25   1.77441E+~
##  8 9/25/2019 610569      620775.875 591001.31~ 602472.68~ 602472.6875 1.54361E+~
##  9 9/26/2019 602520.75   604371.375 560365.06~ 576215.68~ 576215.6875 1.36678E+~
## 10 9/27/2019 575799.3125 584457.375 562864.125 583067.125 583067.125  1.15944E+~
## # ... with 605 more rows</code></pre>
</div>
<div id="vector-functions---descending" class="section level2">
<h2>Vector functions - Descending</h2>
<pre class="r"><code>btcdata %&gt;%
 arrange(desc(Date))</code></pre>
<pre><code>## # A tibble: 619 x 7
##    Date      Open        High       Low        Close      `Adj Close` Volume    
##    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     
##  1 9/9/2020  747769.125  759233     738947.56~ 751046.25  751046.25   1.76927E+~
##  2 9/8/2020  761576.3125 768096.375 734651.81~ 747574.68~ 747574.6875 2.46677E+~
##  3 9/7/2020  753499.9375 764267.625 728510.75  761595.18~ 761595.1875 2.47533E+~
##  4 9/6/2020  744710      758517     736628.68~ 753452.625 753452.625  2.71699E+~
##  5 9/5/2020  770002.875  775059.875 728556.18~ 744882.125 744882.125  3.28997E+~
##  6 9/4/2020  751434.625  780135.06~ 748254.31~ 769950.43~ 769950.4375 2.19483E+~
##  7 9/30/2020 799594.25   800413.81~ 788336.56~ 793269.06~ 793269.0625 1.52656E+~
##  8 9/30/2019 571411.375  587364.75  553209.5   585926.18~ 585926.1875 1.20913E+~
##  9 9/3/2020  835608.125  838189.375 747916.31~ 752531.375 752531.375  2.3451E+12
## 10 9/29/2020 790205.375  800548.18~ 786830.43~ 799846.31~ 799846.3125 1.50843E+~
## # ... with 609 more rows</code></pre>
</div>
<div id="pivoting-spread" class="section level2">
<h2>Pivoting – Spread</h2>
<pre class="r"><code>library(dplyr)
stocks &lt;- data.frame(
  time = as.Date(&#39;2009-01-01&#39;) + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
stocksm &lt;- stocks %&gt;% gather(stock, price, -time)
stocksm %&gt;% spread(stock, price)</code></pre>
<pre><code>##          time           X          Y          Z
## 1  2009-01-01  0.54766973 -0.3605360  0.1533449
## 2  2009-01-02 -0.50886799  3.2334940  5.5528407
## 3  2009-01-03 -0.88221723  1.2939629 -8.8666980
## 4  2009-01-04  1.03842564 -2.3837971  3.8473692
## 5  2009-01-05 -0.22856631  1.6739827 -3.1089103
## 6  2009-01-06 -0.06123896  1.4328968 -1.1596763
## 7  2009-01-07  0.58473087 -3.4170723 -1.4320446
## 8  2009-01-08 -0.27778081 -0.3964924 -2.3575828
## 9  2009-01-09 -0.06736948  2.5330770 -1.9284371
## 10 2009-01-10  0.01881581 -3.3858551 -2.8447890</code></pre>
</div>
<div id="pivoting-gather" class="section level2">
<h2>Pivoting – Gather</h2>
<pre class="r"><code>library(dplyr)

stocks &lt;- tibble(
  time = as.Date(&#39;2009-01-01&#39;) + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)

gather(stocks, &quot;stock&quot;, &quot;price&quot;, -time)</code></pre>
<pre><code>## # A tibble: 30 x 3
##    time       stock  price
##    &lt;date&gt;     &lt;chr&gt;  &lt;dbl&gt;
##  1 2009-01-01 X      0.190
##  2 2009-01-02 X     -0.495
##  3 2009-01-03 X      0.505
##  4 2009-01-04 X     -0.939
##  5 2009-01-05 X     -1.00 
##  6 2009-01-06 X      1.00 
##  7 2009-01-07 X     -0.248
##  8 2009-01-08 X     -1.70 
##  9 2009-01-09 X      1.96 
## 10 2009-01-10 X      0.584
## # ... with 20 more rows</code></pre>
</div>
<div id="missing-values---fill" class="section level2">
<h2>Missing Values - Fill</h2>
<pre class="r"><code>btcdata %&gt;% fill(Date)</code></pre>
<pre><code>## # A tibble: 619 x 7
##    Date      Open        High       Low        Close      `Adj Close` Volume    
##    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;     
##  1 9/18/2019 734975.875  731490.68~ 725478.5   725961     725961      1.15101E+~
##  2 9/19/2019 726121      735039.75  703342.81~ 732951.18~ 732951.1875 1.42341E+~
##  3 9/20/2019 732944.3125 732415.81~ 721472.43~ 724993.93~ 724993.9375 1.04916E+~
##  4 9/21/2019 725136.875  725453.68~ 712110.43~ 713463.93~ 713463.9375 9.5596E+11
##  5 9/22/2019 713777.125  717307.06~ 706490.93~ 717018.56~ 717018.5625 9.39824E+~
##  6 9/23/2019 716845.5625 713261     688686.5   688840.875 688840.875  1.07227E+~
##  7 9/24/2019 688840.6875 695793.75  594059.875 611785.25  611785.25   1.77441E+~
##  8 9/25/2019 610569      620775.875 591001.31~ 602472.68~ 602472.6875 1.54361E+~
##  9 9/26/2019 602520.75   604371.375 560365.06~ 576215.68~ 576215.6875 1.36678E+~
## 10 9/27/2019 575799.3125 584457.375 562864.125 583067.125 583067.125  1.15944E+~
## # ... with 609 more rows</code></pre>
</div>
<div id="missing-values---expand" class="section level2">
<h2>Missing Values - Expand</h2>
<pre class="r"><code>btcdata %&gt;% expand(High)</code></pre>
<pre><code>## # A tibble: 616 x 1
##    High       
##    &lt;chr&gt;      
##  1 1012870.438
##  2 1015658.938
##  3 1016995.625
##  4 1019734.375
##  5 1031586.063
##  6 1034299.813
##  7 1044144.625
##  8 1046699.188
##  9 1056543.875
## 10 1145966.25 
## # ... with 606 more rows</code></pre>
</div>
<div id="narrative" class="section level2">
<h2>Narrative</h2>
<ul>
<li><p>I find it very interesting that how easy it to do analyze the data using R.</p></li>
<li><p>On the other hand, R is not so simple as learning SQL.</p></li>
</ul>
</div>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="/index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="/images/hugo-logo.png" alt="Img link to Hugo website" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    

    
  </body>
</html>

