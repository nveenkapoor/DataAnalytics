---
title: A03 Assignment
author: Naveen
date: '2021-06-03'
slug: a03-assignment
categories:
  - data
tags: []
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="import-data---lego_sales" class="section level2">
<h2>Import Data - lego_sales</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.3     v purrr   0.3.4
## v tibble  3.1.1     v dplyr   1.0.6
## v tidyr   1.1.3     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.1</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>lego_sales &lt;- read_csv(&quot;lego_sales.csv&quot;)</code></pre>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   first_name = col_character(),
##   last_name = col_character(),
##   age = col_double(),
##   phone_number = col_character(),
##   set_id = col_double(),
##   number = col_character(),
##   theme = col_character(),
##   subtheme = col_character(),
##   year = col_double(),
##   name = col_character(),
##   pieces = col_double(),
##   us_price = col_double(),
##   image_url = col_character(),
##   quantity = col_double()
## )</code></pre>
<pre class="r"><code>head(lego_sales)</code></pre>
<pre><code>## # A tibble: 6 x 14
##   first_name last_name   age phone_number set_id number theme    subtheme   year
##   &lt;chr&gt;      &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;
## 1 Kimberly   Beckstead    24 216-555-2549  24701 76062  DC Comi~ Mighty M~  2018
## 2 Neel       Garvin       35 819-555-3189  25626 70595  Ninjago  Rise of ~  2018
## 3 Neel       Garvin       35 819-555-3189  24665 21031  Archite~ &lt;NA&gt;       2018
## 4 Chelsea    Bouchard     41 &lt;NA&gt;          24695 31048  Creator  &lt;NA&gt;       2018
## 5 Chelsea    Bouchard     41 &lt;NA&gt;          25626 70595  Ninjago  Rise of ~  2018
## 6 Chelsea    Bouchard     41 &lt;NA&gt;          24721 10831  Duplo    &lt;NA&gt;       2018
## # ... with 5 more variables: name &lt;chr&gt;, pieces &lt;dbl&gt;, us_price &lt;dbl&gt;,
## #   image_url &lt;chr&gt;, quantity &lt;dbl&gt;</code></pre>
<pre class="r"><code>names(lego_sales)</code></pre>
<pre><code>##  [1] &quot;first_name&quot;   &quot;last_name&quot;    &quot;age&quot;          &quot;phone_number&quot; &quot;set_id&quot;      
##  [6] &quot;number&quot;       &quot;theme&quot;        &quot;subtheme&quot;     &quot;year&quot;         &quot;name&quot;        
## [11] &quot;pieces&quot;       &quot;us_price&quot;     &quot;image_url&quot;    &quot;quantity&quot;</code></pre>
</div>
<div id="question-1" class="section level2">
<h2>Question 1</h2>
<pre class="r"><code>ascen &lt;- lego_sales %&gt;% 
  group_by(first_name) %&gt;% 

  summarise(total_quantity = sum(quantity))
  ## group_by(first_name)

arrange(ascen, desc(total_quantity)) %&gt;% top_n(3)</code></pre>
<pre><code>## Selecting by total_quantity</code></pre>
<pre><code>## # A tibble: 3 x 2
##   first_name total_quantity
##   &lt;chr&gt;               &lt;dbl&gt;
## 1 Jackson                21
## 2 Joseph                 20
## 3 Jacob                  15</code></pre>
</div>
<div id="question-2" class="section level2">
<h2>Question 2</h2>
<pre class="r"><code>ascen &lt;- lego_sales %&gt;% 
  group_by(theme) %&gt;% 

  summarise(total_quantity = sum(quantity))

arrange(ascen, desc(total_quantity)) %&gt;% top_n(3)</code></pre>
<pre><code>## Selecting by total_quantity</code></pre>
<pre><code>## # A tibble: 3 x 2
##   theme        total_quantity
##   &lt;chr&gt;                 &lt;dbl&gt;
## 1 Star Wars               117
## 2 Nexo Knights             93
## 3 Mixels                   83</code></pre>
</div>
<div id="question-3" class="section level2">
<h2>Question 3</h2>
<pre class="r"><code>ascen &lt;- lego_sales %&gt;% 
  group_by(theme,subtheme) %&gt;% 
  filter(!is.na(subtheme)) %&gt;% 

  summarise(total_quantity = sum(quantity))</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;theme&#39;. You can override using the `.groups` argument.</code></pre>
<pre class="r"><code>td &lt;- arrange(ascen, desc(total_quantity)) 

 head(td,3)</code></pre>
<pre><code>## # A tibble: 3 x 3
## # Groups:   theme [3]
##   theme        subtheme total_quantity
##   &lt;chr&gt;        &lt;chr&gt;             &lt;dbl&gt;
## 1 Ninjago      Skybound             34
## 2 Nexo Knights Ultimate             32
## 3 City         Fire                 31</code></pre>
</div>
<div id="question-4" class="section level2">
<h2>Question 4</h2>
<pre class="r"><code>age_group &lt;- lego_sales %&gt;% 
  mutate(group = case_when(
    between(age,  0, 18) ~ &quot;18 and under&quot;,
    between(age, 19, 25) ~ &quot;19 - 25&quot;,
    between(age, 26, 35) ~ &quot;26 - 35&quot;,
  between(age, 35, 51) ~ &quot;35 - 51&quot;,
     between(age, 51, 100) ~ &quot;51 and over&quot;,
    TRUE ~ NA_character_
  ))</code></pre>
</div>
<div id="question-8" class="section level2">
<h2>Question 8</h2>
<pre class="r"><code>ascen &lt;- lego_sales  %&gt;%   head(10)


ggplot(ascen, aes(y = theme, x = subtheme)) + 
  geom_col()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="question-9" class="section level2">
<h2>Question 9</h2>
<pre class="r"><code>ascen &lt;- lego_sales  %&gt;%   head(5)


ggplot(ascen, aes(y = theme, x = subtheme, fill = theme)) + 
  geom_col()</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
